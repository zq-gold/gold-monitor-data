name: Gold Data Update

on:
  workflow_dispatch:
  schedule:
    - cron: "0 */6 * * *"

jobs:
  update:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4

      - name: Generate gold_data.json
        run: |
          cat > gold_data.json << 'EOF'
          {
            "sz159937": 10.395,
            "comex_gold": 2045.0,
            "events": [
              "【模拟】央行连续第14个月增持黄金",
              "【模拟】美债利差收窄至-65bp",
              "【模拟】中东地缘风险升温",
              "【模拟】COMEX库存降至780万盎司"
            ],
            "updated_at": "2026-01-21T17:00:00Z"
          }
          EOF

      - name: Commit file
        run: |
          git config --global user.name 'github-actions[bot]'
          git config --global user.email 'github-actions[bot]@users.noreply.github.com'
          git add gold_data.json
          git commit -m "Update gold data" || echo "No changes"
          git push
